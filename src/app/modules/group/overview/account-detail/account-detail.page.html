<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button mode="ios" fill="none" [routerLink]="'/group/' + groupId + '/preferences'" routerDirection="back">
                <fa-duotone-icon slot="icon-only" class="primary" fixedWidth [icon]="['fad', 'chevron-left']"></fa-duotone-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>{{account?.name}}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">{{account?.name}}</ion-title>
        </ion-toolbar>
    </ion-header>
    <ion-list>
        <ion-item lines="inset">
            <fa-duotone-icon slot="start" class="primary" fixedWidth [icon]="['fad', 'user']"></fa-duotone-icon>
            <ion-input [(ngModel)]="newName" value="{{account?.name}}"></ion-input>
            <ion-button (click)="setName()"
                        [attr.disabled]="newName === account?.name || newName?.length < 2">{{'actions.edit' | translate}}</ion-button>
        </ion-item>
        <ion-item *ngIf="isSelf">
            <fa-duotone-icon slot="start" class="primary-reversed" fixedWidth [icon]="['fad', 'bell']"></fa-duotone-icon>
            <ion-label>
                <h3>{{'group.overview.account.enablePush' | translate}}</h3>
            </ion-label>
            <ion-toggle (ngModelChange)="togglePush()" [(ngModel)]="enablePush"
                        slot="end"></ion-toggle>
        </ion-item>
        <ion-item lines="full" *ngIf="isAdmin">
            <fa-duotone-icon slot="start" class="primary" fixedWidth [icon]="['fad', 'users-crown']"></fa-duotone-icon>
            <ion-label>
                <h3>{{'group.overview.account.enableAdmin' | translate}}</h3>
            </ion-label>
            <ion-toggle (ngModelChange)="toggleAdmin()" [(ngModel)]="enableAdmin" [disabled]="!canDisableAdmin"
                        slot="end"></ion-toggle>
        </ion-item>

        <ion-list-header class="ion-margin-top" lines="full">
            <ion-label>
                {{'group.overview.account.balance' | translate}}
            </ion-label>
        </ion-list-header>
        <ion-item>
            <fa-duotone-icon slot="start" class="primary" fixedWidth [icon]="['fad', 'wallet']"></fa-duotone-icon>
            <ion-label>
                <h3>{{'group.overview.account.balanceAmount' | translate}}</h3>
            </ion-label>
            <span slot="end"
                  [ngClass]="balance?.amount >= 0 ? 'positive-amount' : 'negative-amount'">{{balance?.amount | money}}</span>
        </ion-item>
        <ion-item>
            <fa-duotone-icon slot="start" class="success" fixedWidth [icon]="['fad', 'plus-circle']"></fa-duotone-icon>
            <ion-label>
                <h3>{{'group.overview.account.totalIn' | translate}}</h3>
            </ion-label>
            <span slot="end">{{balance?.totalIn | money}}</span>
        </ion-item>
        <ion-item lines="full">
            <fa-duotone-icon slot="start" class="danger" fixedWidth [icon]="['fad', 'minus-circle']"></fa-duotone-icon>
            <ion-label>
                <h3>{{'group.overview.account.totalOut' | translate}}</h3>
            </ion-label>
            <span slot="end">{{balance?.totalOut | money}}</span>
        </ion-item>
    </ion-list>

    <div class="delete-clause">
        <ion-label color="medium" id="explanation" *ngIf="!group?.canLeaveGroup(account.id)">
            <p>{{'group.overview.account.deletePrecondition' | translate:{name: isSelf ? ('group.overview.account.you' | translate) : account?.name} }}</p>
        </ion-label>
        <ion-button (click)="deleteAccount()" *ngIf="isAdmin && !isSelf" [disabled]="!group?.canLeaveGroup(account.id)"
                    color="danger" expand="block">
            <ion-label>
                {{'group.overview.account.deleteAccount' | translate:{name: account?.name} }}
            </ion-label>
        </ion-button>
        <ion-button (click)="deleteAccount()" *ngIf="isSelf" [disabled]="!group?.canLeaveGroup(account.id)" color="danger">
            <ion-label>
                {{'group.overview.account.leaveGroup' | translate:{groupName: group?.name} }}
            </ion-label>
        </ion-button>
    </div>
</ion-content>
